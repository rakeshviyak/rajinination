## The contents of this file are subject to the Common Public Attribution
## License Version 1.0. (the "License"); you may not use this file except in
## compliance with the License. You may obtain a copy of the License at
## http://code.reddit.com/LICENSE. The License is based on the Mozilla Public
## License Version 1.1, but Sections 14 and 15 have been added to cover use of
## software over a computer network and provide for limited attribution for the
## Original Developer. In addition, Exhibit A has been modified to be
## consistent with Exhibit B.
##
## Software distributed under the License is distributed on an "AS IS" basis,
## WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
## the specific language governing rights and limitations under the License.
##
## The Original Code is reddit.
##
## The Original Developer is the Initial Developer.  The Initial Developer of
## the Original Code is reddit Inc.
##
## All portions of the code written by reddit are Copyright (c) 2006-2012
## reddit Inc. All Rights Reserved.
###############################################################################

<%namespace file="utils.html" import="error_field"/>
<%namespace file="printablebuttons.html" import="ynbutton" />
<% from r2.lib.template_helpers import static %>

<div class="${thing._class} usertable">
  %if thing.can_remove_self():
    ${ynbutton(op=thing.remove_action,
               title=thing.remove_self_action,
               executed=thing.remove_self_final,
               question=thing.remove_self_confirm,
               format=thing.remove_self_title,
               format_arg='action',
               _class=thing.type + ' remove-self',
               hidden_data=dict(
                 id=c.user._fullname,
                 type=thing.type,
                 container=thing.container_name))}
  %endif

  %if thing.addable:
    <form action="/post/${thing.destination}"
          method="post" class="pretty-form medium-text"
          onsubmit="return post_form(this, '${thing.destination}');"
          id="${thing.type}">
      <h1>${thing.form_title}</h1>

      <input type="hidden" name="action" value="add"/>
      <input type="hidden" name="container" value="${thing.container_name}"/>
      <input type="hidden" name="type" value="${thing.type}"/>
      <input type="text" name="name" id="name"/>
      <button class="btn" type="submit">${_("add")}</button>
      <span class="status"></span>
      ${error_field("USER_DOESNT_EXIST", "name")}
    </form>
  %endif

  <div id="${thing.type}-table" 
       ${"style='display:none'" if not thing.users else ""}>
    <h1> 
      ${thing.table_title}
    </h1>

    <table>
      %if getattr(thing, "table_headers", None):
        <tr>
        %for header in thing.table_headers:
           <th>${header}</th>
        %endfor
        </tr>
      %endif
      %if thing.users:
        %for item in thing.users:
          ${item}
        %endfor
      %else:
        <tr><td></td></tr>
      %endif
    </table>
  </div>

</div>

